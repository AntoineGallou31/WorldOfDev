<div class="create-article-container">
  <header class="header">
    <span class="material-icons back-arrow" routerLink='/feed'>arrow_back</span>
    <h1 class="page-title">Créer un nouvel article</h1>
  </header>

  <form class="article-form" [formGroup]="postForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <div class="custom-select-placeholder">
        <select class="form-select" formControlName="subjectId">
          <option value="" disabled selected>Choisir un sujet</option>
          <option *ngFor="let subject of subjects" [value]="subject.id">
            {{ subject.name }}
          </option>
        </select>
        <div class="error-message" *ngIf="postForm.get('subjectId')?.invalid && postForm.get('subjectId')?.touched">
          Veuillez sélectionner un sujet
        </div>
      </div>
    </div>

    <div class="form-group">
      <input type="text" placeholder="Titre de l'article" class="form-input" formControlName="title">
      <div class="error-message" *ngIf="postForm.get('title')?.invalid && postForm.get('title')?.touched">
        Le titre doit contenir au moins 3 caractères
      </div>
    </div>

    <div class="form-group">
      <textarea placeholder="Contenu de l'article" class="form-textarea" formControlName="content"></textarea>
      <div class="error-message" *ngIf="postForm.get('content')?.invalid && postForm.get('content')?.touched">
        Le contenu doit contenir au moins 10 caractères
      </div>
    </div>

    <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>

    <button type="submit" class="submit-button" [disabled]="submitting">
      {{ submitting ? 'Création en cours...' : 'Créer' }}
    </button>
  </form>
</div>
