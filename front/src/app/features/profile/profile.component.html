<div class="profile-container">
  <h2>Profil utilisateur</h2>

  <form class="profile-form" [formGroup]="profileForm" (ngSubmit)="onSubmit()" *ngIf="user">
    <div class="form-group">
      <input
        type="text"
        placeholder="Nom d'utilisateur"
        class="form-input"
        formControlName="username"
        value="{{ user.username }}"
      />
      <div class="error-message" *ngIf="profileForm.get('username')?.invalid && profileForm.get('username')?.touched">
        Le nom d'utilisateur est requis (minimum 3 caractères)
      </div>
    </div>

    <div class="form-group">
      <input
        type="email"
        placeholder="Adresse email"
        class="form-input"
        formControlName="email"
        value="{{ user.email }}"
      />
      <div class="error-message" *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
        Entrez une adresse email valide
      </div>
    </div>

    <div class="form-group">
      <input
        type="password"
        placeholder="Nouveau mot de passe"
        class="form-input"
        formControlName="password"
      />
      <div class="error-message" *ngIf="profileForm.get('password')?.invalid && profileForm.get('password')?.touched">
        Le mot de passe doit contenir au moins 6 caractères.
      </div>
    </div>

    <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>

    <button type="submit" class="submit-button" [disabled]="submitting || profileForm.invalid">
      {{ submitting ? 'Sauvegarde en cours...' : 'Sauvegarder' }}
    </button>
  </form>

  <hr />

  <h2>Abonnements</h2>

  <div class="subscriptions">
    <div class="subscription-card" *ngFor="let subject of subjects">
      <h3>{{ subject.name }}</h3>
      <p>Description : {{ subject.description }}</p>
      <button class="unsubscribe-btn" (click)="unsubscribe(subject)">Se désabonner</button>
    </div>
  </div>
</div>

